package com.sefaz.test;

import static org.junit.jupiter.api.Assertions.assertEquals;

import java.io.File;
import java.io.StringReader;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;

import org.junit.jupiter.api.Test;

import br.inf.portalfiscal.cte.DistDFeInt;
import br.inf.portalfiscal.cte.procCTE.CteProc;

class JaxbMarshallerTest {

	@Test
	void testDistDfe() throws Exception {
		JAXBContext context = JAXBContext.newInstance(DistDFeInt.class);
		DistDFeInt dist = new DistDFeInt();
		dist.setCNPJ("ddddddd");

		context.createMarshaller().marshal(dist,
				new File("C:\\Users\\nicho\\OneDrive\\Documentos\\teste soapmessage\\maCteDfeInteresse.xml"));
	}

	@Test
	void testUnmarshalCteProc() {
		String xml = "<cteProc versao=\"3.00\" xmlns=\"http://www.portalfiscal.inf.br/cte\"><CTe xmlns=\"http://www.portalfiscal.inf.br/cte\"><infCte versao=\"3.00\" Id=\"CTe24201210942760000171570010003470001086857214\"><ide><cUF>24</cUF><cCT>08685721</cCT><CFOP>5351</CFOP><natOp>PRESTACAO DE SERV.DE TRANSP. EXEC.MESMA NATUREZA</natOp><mod>57</mod><serie>1</serie><nCT>347000</nCT><dhEmi>2020-12-30T13:37:55-03:00</dhEmi><tpImp>1</tpImp><tpEmis>1</tpEmis><cDV>4</cDV><tpAmb>1</tpAmb><tpCTe>0</tpCTe><procEmi>0</procEmi><verProc>SNCTE 1.2</verProc><cMunEnv>2403251</cMunEnv><xMunEnv>PARNAMIRIM</xMunEnv><UFEnv>RN</UFEnv><modal>01</modal><tpServ>2</tpServ><cMunIni>2403251</cMunIni><xMunIni>PARNAMIRIM</xMunIni><UFIni>RN</UFIni><cMunFim>2408102</cMunFim><xMunFim>NATAL</xMunFim><UFFim>RN</UFFim><retira>1</retira><indIEToma>1</indIEToma><toma3><toma>1</toma></toma3></ide><compl><ObsCont xCampo=\"FISCO\"><xTexto>ISENTO DO ICMS CONFORME ART. 25 INCISO VII - RICMS/RN</xTexto></ObsCont><ObsCont xCampo=\"LEI DA TRANSPARENCIA\"><xTexto>O valor aproximado de tributos incidentes sobre o preco deste servico e de R$ 0,00</xTexto></ObsCont></compl><emit><CNPJ>10942760000171</CNPJ><IE>202214168</IE><xNome>AVEX TRANSP. E LOGISTICA LTDA-ME</xNome><xFant>AVEX LOGISTICA</xFant><enderEmit><xLgr>RUA ALCIDES JERONIMO FREIRE</xLgr><nro>1165</nro><xBairro>PQ. DE EXPOSICOES</xBairro><cMun>2403251</cMun><xMun>PARNAMIRIM</xMun><CEP>59146470</CEP><UF>RN</UF><fone>8430115061</fone></enderEmit></emit><rem><CNPJ>09512164000172</CNPJ><IE>9043902080</IE><xNome>CGD COMPONENTES AUTOMOTIVE</xNome><enderReme><xLgr>JOSE LEMOS</xLgr><nro>132</nro><xBairro>THOMAZ COELHO</xBairro><cMun>4101804</cMun><xMun>ARAUCARIA</xMun><CEP>83707010</CEP><UF>PR</UF><cPais>1058</cPais><xPais>BRASIL</xPais></enderReme></rem><exped><CNPJ>20147617002276</CNPJ><IE>312153900116</IE><xNome>JAMEF SAO</xNome><enderExped><xLgr>RUA MIGUEL MENTEM</xLgr><nro>500</nro><xBairro>VILA GUILHERME</xBairro><cMun>3550308</cMun><xMun>SAO PAULO</xMun><CEP>02050010</CEP><UF>SP</UF><cPais>1058</cPais><xPais>BRASIL</xPais></enderExped></exped><dest><CNPJ>08897417003126</CNPJ><IE>205125042</IE><xNome>F W DISRIBUIDORA LTDA</xNome><fone>8433446300</fone><enderDest><xLgr>AV EUSEBIO ROCHA</xLgr><nro>1102</nro><xBairro>LAGOA NOVA</xBairro><cMun>2408102</cMun><xMun>NATAL</xMun><CEP>59054600</CEP><UF>RN</UF><cPais>1058</cPais><xPais>BRASIL</xPais></enderDest></dest><vPrest><vTPrest>84.41</vTPrest><vRec>84.41</vRec><Comp><xNome>FRETE VALOR</xNome><vComp>84.41</vComp></Comp></vPrest><imp><ICMS><ICMS45><CST>41</CST></ICMS45></ICMS><ICMSUFFim><vBCUFFim>0.00</vBCUFFim><pFCPUFFim>0.00</pFCPUFFim><pICMSUFFim>0.00</pICMSUFFim><pICMSInter>0.00</pICMSInter><vFCPUFFim>0.00</vFCPUFFim><vICMSUFFim>0.00</vICMSUFFim><vICMSUFIni>0.00</vICMSUFIni></ICMSUFFim></imp><infCTeNorm><infCarga><vCarga>898.69</vCarga><proPred>DIVERSOS (NE)</proPred><xOutCat>898.69</xOutCat><infQ><cUnid>03</cUnid><tpMed>VOLUMES</tpMed><qCarga>1.0000</qCarga></infQ><infQ><cUnid>01</cUnid><tpMed>PESO REAL</tpMed><qCarga>5.9880</qCarga></infQ><infQ><cUnid>01</cUnid><tpMed>PESO BASE DE CALCULO</tpMed><qCarga>5.9880</qCarga></infQ></infCarga><infDoc><infNFe><chave>41201209512164000172550020000903822811422399</chave></infNFe></infDoc><docAnt><emiDocAnt><CNPJ>20147617002276</CNPJ><IE>312153900116</IE><UF>SP</UF><xNome>JAMEF SAO</xNome><idDocAnt><idDocAntEle><chCTe>35201220147617002276570010054150401994584958</chCTe></idDocAntEle></idDocAnt></emiDocAnt></docAnt><infModal versaoModal=\"3.00\"><rodo><RNTRC>11971859</RNTRC></rodo></infModal></infCTeNorm><autXML><CNPJ>04898488000177</CNPJ></autXML><infRespTec><CNPJ>00124625000165</CNPJ><xContato>Wanderley Niehues</xContato><email>wanderley@softnews.com.br</email><fone>41999144100</fone></infRespTec></infCte><infCTeSupl><qrCodCTe>https://dfe-portal.svrs.rs.gov.br/cte/qrCode?chCTe=24201210942760000171570010003470001086857214&amp;tpAmb=1</qrCodCTe></infCTeSupl><Signature xmlns=\"http://www.w3.org/2000/09/xmldsig#\"><SignedInfo><CanonicalizationMethod Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /><SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\" /><Reference URI=\"#CTe24201210942760000171570010003470001086857214\"><Transforms><Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\" /><Transform Algorithm=\"http://www.w3.org/TR/2001/REC-xml-c14n-20010315\" /></Transforms><DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\" /><DigestValue>3iAFjD08kqW+T2t3ru7/53Rkj3U=</DigestValue></Reference></SignedInfo><SignatureValue>X0V6EymGTgMM4w8Omgls/575Ril/Mqopn2tHseU75yTZezZnQXCHB5rYrxHJtYA79k6OKWbno0jH34V2uY3rwiNeb7iIfojjD40AA5Z5RiyJ6M0Y5Ed0nPaPk32pS2NG2q0fJnqrIXl0p5aQDrgwwQVnvwMBgXOw35jvS3HKNrv7jQ3lAyvDMO+YZr0Cq3lZ7Z2h2EkGjq6MplnYLbErcHukqnBG8UouIJ8dtrK5FPpbxsczn2avXqjXxA1u9en27/obS4vreOyePO5BD9UiAmjzmcEU1LBSeoKg/3jnoWkyLKECkdz5eeiqCVEzN6zzqFOrO30yL4vbjaeyj2LWzA==</SignatureValue><KeyInfo><X509Data><X509Certificate>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</X509Certificate></X509Data></KeyInfo></Signature></CTe><protCTe versao=\"3.00\" xmlns=\"http://www.portalfiscal.inf.br/cte\"><infProt Id=\"CTe324200005002358\"><tpAmb>1</tpAmb><verAplic>RS20200915181434</verAplic><chCTe>24201210942760000171570010003470001086857214</chCTe><dhRecbto>2020-12-30T13:46:41-03:00</dhRecbto><nProt>324200005002358</nProt><digVal>3iAFjD08kqW+T2t3ru7/53Rkj3U=</digVal><cStat>100</cStat><xMotivo>Autorizado o uso do CT-e</xMotivo></infProt></protCTe></cteProc>";
		try {
			JAXBContext context = JAXBContext.newInstance(CteProc.class);
			CteProc cteProc = (CteProc) context.createUnmarshaller().unmarshal(new StringReader(xml));
			assertEquals("08685721", cteProc.getCTe().getInfCte().getIde().getCCT());
		} catch (JAXBException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
